name: dcat-fdp
version: 1.0.0

mappings:
  - name: fdp-root
    endpoint: /{schema}/api/fdp
    methods: [GET]
    steps:
      - query: src/queries/get-schema-metadata.gql
      - transform: src/transforms/publish/to-fdp-root.jslt
        tests:
          - input: test/publish/fdp-root/input.json
            output: test/publish/fdp-root/output.json
      - output-rdf: turtle

  - name: fdp-catalog
    endpoint: /{schema}/api/fdp/catalog/{id}
    methods: [GET]
    steps:
      - query: src/queries/get-catalog.gql
      - transform: src/transforms/publish/to-dcat-catalog.jslt
        tests:
          - input: test/publish/catalog/input.json
            output: test/publish/catalog/output.json
      - output-rdf: turtle

  - name: fdp-dataset
    endpoint: /{schema}/api/fdp/dataset/{id}
    methods: [GET]
    steps:
      - query: src/queries/get-dataset.gql
      - transform: src/transforms/publish/to-dcat-dataset.jslt
        tests:
          - input: test/publish/dataset/input.json
            output: test/publish/dataset/output.json
      - output-rdf: turtle
